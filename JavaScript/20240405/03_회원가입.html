<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="./css/register.css">
    <script>
        // commit
        document.addEventListener('DOMContentLoaded', function () {
            const btnSubmit = document.querySelector('.btn.btnBlack'); // 가입하기 버튼
            const userId = document.getElementById('user-id'); // 아이디 필드
            const frmRegister = document.getElementById('register') // 폼태그

            const pw1 = document.querySelector('#user-pw1') // 비밀번호 필드
            const pw2 = document.querySelector('#user-pw2') // 비밀번호 필드

            btnSubmit.addEventListener('click', function () {
                const idLength = document.querySelector('#user-id').value.length
                console.log(idLength)
                if (idLength < 4 || idLength > 15) {
                    // userId 필드 내용의 길이가 4미만이거나 15 보다 더 큰 경우 실행
                    alert('4~15자리로 입력하세요.'); // 오류 메시지 출력
                    /*
                    select() : 사용자가 기존에 입력한 값을 선택
                    focus() : 사용자가 기존에 입력한 값을 지우고 새로운 값을 입력하도록 텍스트 필드에 커서를 가져다 놓음
                     */
                    userId.select()
                    return;
                }
                frmRegister.submit();
            })

            pw1.addEventListener('change', function () {
                if (pw1.value.length < 8) {
                    alert('비밀번호는 8자리 이상이어야 합니다.')
                    pw1.value=''; // 비밀번호 필드 지움
                    pw1.focus(); // 비밀번호를 다시 입력할 수 있도록 포커싱
                }
            })

            // pw2 요소에 change 이벤트가 발생했을 때 실행
            pw2.addEventListener('change', function () {
                if (pw1.value != pw2.value) { // pw1과 pw2가 값이 틀리면 실행
                    alert('비밀번호가 다릅니다.')
                    pw1.focus(); // 비밀번호를 다시 입력할 수 있도록 포커싱
                }
            });

            //
            const btnTrans = document.querySelector('span.trans');
            btnTrans.addEventListener('click', function (e) {
                if (pw1.getAttribute('type') == 'password') {
                    pw1.setAttribute('type', 'text')
                    e.currentTarget.textContent = '패스워드로 변환';
                }
                else {
                    pw1.setAttribute('type', 'password')
                    e.currentTarget.textContent = '문자로 변환';
                }
            })
        })
    </script>
</head>
<body>
<div id="container">
    <h1>회원 가입</h1>
    <form action="#" id="register">
        <ul id="user-info">
            <li>
                <label for="user-id" class="field">아이디</label>
                <input type="text" name="user-id" id="user-id" placeholder="4~15자리로 입력" required>
            </li>
            <li>
                <label for="email" class="field">이메일</label>
                <input type="email" name="email" id="email" required>
            </li>
            <li>
                <label for="user-pw1" class="field">비밀번호</label>
                <input type="password" name="user-pw1" id="user-pw1" placeholder="8자리 이상" required>
                <span class="trans">문자로 변환</span>
            </li>
            <li>
                <label for="user-pw2" class="field">비밀번호 확인</label>
                <input type="password" name="user-pw2" id="user-pw2" required>
            </li>
            <li>
                <label class="field">메일링 수신</label>
                <label class="r"><input type="radio" value="yes" name="mailing">예</label>
                <label class="r"><input type="radio" value="no" name="mailing">아니오</label>
            </li>
        </ul>
        <ul id="buttons">
            <li>
                <input type="button" class="btn btnBlack" value="가입하기">
            </li>
            <li>
                <input type="reset" class="btn btnGray" value="취소">
            </li>
        </ul>
    </form>
</div>
</body>
</html>